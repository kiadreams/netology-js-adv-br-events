(()=>{"use strict";class e{#e=0;#i=[];#t=4;constructor(){this.counter=document.querySelector(".counter"),this.score=document.querySelector(".score"),this.gameField=this.#s(),document.querySelector("main").append(this.gameField)}get emptyHole(){let e=this.#n();for(;e===this.#e;)e=this.#n();return this.#e=e,this.#i[e]}#n(){return Math.floor(4*Math.random())}#s(){const e=document.createElement("div");e.classList.add("game-field");for(let i=0;i<this.#t;i++){const i=document.createElement("div");i.classList.add("hole"),e.append(i),this.#i.push(i)}return e}}class i{constructor(){this.goblin=this.#o(),this.isGoblinVisible=!1}hide(){this.goblin.classList.add("hidden"),this.isGoblinVisible=!1}showInField(e){e.append(this.goblin),this.goblin.classList.remove("hidden"),this.isGoblinVisible=!0}addEventListener(e){this.goblin.addEventListener("click",e)}#o(){const e=document.createElement("div");return e.classList.add("goblin"),e}}class t{#l=10;#h=0;#d=0;#r=5;constructor(){this.gameField=new e,this.goblin=new i,this.score=0}startGame(){this.clickOnGoblin=this.clickOnGoblin.bind(this),this.goblin.addEventListener(this.clickOnGoblin),this.#c()}clickOnGoblin(){clearTimeout(this.timer),this.goblin.hide(),this.score++,this.gameField.score.textContent=String(this.score),this.#a()?this.#c():this.#u()}#c(){this.timer=setTimeout((()=>{this.goblin.showInField(this.gameField.emptyHole),this.#h++,this.#m()}),1e3*(Math.random()+.5))}#m(){this.timer=setTimeout((()=>{this.goblin.hide(),this.#d++,this.gameField.counter.textContent=String(this.#d),this.#a()?this.#c():this.#u()}),1e3)}#u(){this.goblin.hide(),setTimeout((()=>{const e=this.#d===this.#r?`Вы проиграли!!!\n- ускользнули ${this.#d} гоблинов`:`Вы победили,\nВаш счёт - ${this.score}`;alert(e)}),100)}#a(){return!(this.#h>=this.#l||this.#d===this.#r)}}document.addEventListener("DOMContentLoaded",(()=>{(new t).startGame()}))})();